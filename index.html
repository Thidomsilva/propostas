<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciador de Propostas Sagacy</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/dashboard.css">
</head>
<body>
    <div class="App">
        <!-- Loading -->
        <div id="loading" class="loading-container">
            <div class="loading-bar"></div>
            <div class="loading-text">Autoridade em Expandir Neg√≥cios</div>
        </div>

        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-container">
                    <div class="logo-text">GERENCIADOR DE PROPOSTAS SAGACY</div>
                </div>
                <div class="header-info">
                    <span>Sistema de Propostas Comerciais</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Navigation -->
            <nav class="navigation">
                <div class="nav-buttons">
                    <button class="nav-button active" onclick="showFormulario()">
                        üìù Nova Solicita√ß√£o
                    </button>
                    <button class="nav-button" onclick="showPainel()">
                        üìã Painel de Acompanhamento
                    </button>
                    <button class="nav-button" onclick="showDashboard()">
                        üìä Dashboard
                    </button>
                </div>
            </nav>
            
            <!-- Formul√°rio -->
            <div id="formulario" class="page">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Nova Solicita√ß√£o</h2>
                        <p class="card-subtitle">Preencha o formul√°rio para criar uma nova solicita√ß√£o</p>
                    </div>
                    
                    <form id="form-solicitacao">
                        <div class="form-group">
                            <label for="cliente">Cliente *</label>
                            <input type="text" class="form-control" id="cliente" name="cliente" required>
                        </div>

                        <div class="form-group">
                            <label for="servico">Projeto *</label>
                            <select class="form-control" id="servico" name="servico" required>
                                <option value="">Selecione o projeto...</option>
                                <option value="50 em 30">50 em 30</option>
                                <option value="Auditoria Externa">Auditoria Externa</option>
                                <option value="Auditoria Interna">Auditoria Interna</option>
                                <option value="Business 360">Business 360</option>
                                <option value="Business Intelligence (BI)">Business Intelligence (BI)</option>
                                <option value="Business Plan">Business Plan</option>
                                <option value="Business Plan - Offshore">Business Plan - Offshore</option>
                                <option value="Capacita√ß√£o de L√≠deres">Capacita√ß√£o de L√≠deres</option>
                                <option value="Capacita√ß√£o in Company">Capacita√ß√£o in Company</option>
                                <option value="Coaching">Coaching</option>
                                <option value="Comex">Comex</option>
                                <option value="Compliance">Compliance</option>
                                <option value="Compras Estrat√©gicas">Compras Estrat√©gicas</option>
                                <option value="Consultoria Geral">Consultoria Geral</option>
                                <option value="Formata√ß√£o de Franquias">Formata√ß√£o de Franquias</option>
                                <option value="Governan√ßa Corporativa">Governan√ßa Corporativa</option>
                                <option value="Great Place to Work">Great Place to Work</option>
                                <option value="ISO 9001 Auditoria">ISO 9001 Auditoria</option>
                                <option value="ISO 14001 Auditoria">ISO 14001 Auditoria</option>
                                <option value="Lean Office">Lean Office</option>
                                <option value="Lean Manufacturing">Lean Manufacturing</option>
                                <option value="LGPD">LGPD</option>
                                <option value="L√≠deres em Foco">L√≠deres em Foco</option>
                                <option value="Mentoria Executiva">Mentoria Executiva</option>
                                <option value="Pesquisa de Mercado">Pesquisa de Mercado</option>
                                <option value="Programa de Integridade">Programa de Integridade</option>
                                <option value="Team Building">Team Building</option>
                                <option value="Valuation">Valuation</option>
                                <option value="Outros">Outros</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="solicitante">Solicitante *</label>
                            <select class="form-control" id="solicitante" name="solicitante" required onchange="toggleOutroSolicitante()">
                                <option value="">Selecione o solicitante...</option>
                                <option value="Da Silva">Da Silva</option>
                                <option value="Edson">Edson</option>
                                <option value="Marcos">Marcos</option>
                                <option value="Matoso">Matoso</option>
                                <option value="Milena">Milena</option>
                                <option value="Thiago">Thiago</option>
                                <option value="Vandreia">Vandreia</option>
                                <option value="Victor">Victor</option>
                                <option value="William">William</option>
                                <option value="Outros (especificar)">Outros (especificar)</option>
                            </select>
                        </div>

                        <div class="form-group" id="campo-outro-solicitante" style="display: none;">
                            <label for="outro-solicitante">Nome do Solicitante *</label>
                            <input type="text" class="form-control" id="outro-solicitante" name="outro-solicitante">
                        </div>

                        <div class="form-group">
                            <label for="descricao">Descri√ß√£o do Projeto *</label>
                            <textarea class="form-control" id="descricao" name="descricao" rows="4" required></textarea>
                        </div>

                        <div class="form-group">
                            <label for="prazo">Prazo Desejado</label>
                            <input type="date" class="form-control" id="prazo" name="prazo">
                        </div>

                        <!-- Notifica√ß√£o sobre e-mail -->
                        <div class="email-notification">
                            <div class="email-notification-content">
                                <span class="email-icon">üìß</span>
                                <div class="email-text">
                                    <strong>Notifica√ß√£o Autom√°tica</strong>
                                    <p>Ao enviar esta solicita√ß√£o, um e-mail ser√° enviado automaticamente para <strong>thiago@sagacy.com.br</strong> com todos os detalhes.</p>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">
                                <span id="btn-text">Enviar Solicita√ß√£o</span>
                                <span id="btn-loading" class="d-none">Enviando...</span>
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="limparFormulario()">
                                Limpar
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Dashboard -->
            <div id="dashboard" class="page d-none">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">üèÜ Dashboard com Ranking</h2>
                        <p class="card-subtitle">Ranking de solicitantes e estat√≠sticas</p>
                        <div class="last-refresh" id="last-refresh">Sistema inicializado</div>
                    </div>
                    
                    <!-- KPIs -->
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-icon">üìà</div>
                            <div class="kpi-content">
                                <div class="kpi-number" id="kpi-mes">0</div>
                                <div class="kpi-label">Solicita√ß√µes este M√™s</div>
                                <div class="kpi-trend" id="kpi-mes-trend">-</div>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-icon">‚è±Ô∏è</div>
                            <div class="kpi-content">
                                <div class="kpi-number" id="kpi-tempo">-</div>
                                <div class="kpi-label">Tempo M√©dio</div>
                                <div class="kpi-trend" id="kpi-tempo-trend">-</div>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-icon">‚úÖ</div>
                            <div class="kpi-content">
                                <div class="kpi-number" id="kpi-taxa">0%</div>
                                <div class="kpi-label">Taxa de Finaliza√ß√£o</div>
                                <div class="kpi-trend" id="kpi-taxa-trend">-</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ranking -->
                    <div class="performance-grid">
                        <div class="performance-card">
                            <h3>üèÜ TOP SOLICITANTES</h3>
                            <div class="ranking-list" id="ranking-solicitantes">
                                <div class="loading-message">Carregando ranking...</div>
                            </div>
                        </div>
                        
                        <div class="performance-card">
                            <h3>üìä Servi√ßos Mais Solicitados</h3>
                            <div class="services-chart" id="services-chart">
                                <div class="loading-message">Carregando...</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Status -->
                    <div class="performance-grid">
                        <div class="performance-card">
                            <h3>üìä Status das Solicita√ß√µes</h3>
                            <div class="status-chart">
                                <div class="status-item">
                                    <div class="status-label">Em Andamento</div>
                                    <div class="status-bar-container">
                                        <div class="status-bar status-andamento" id="bar-andamento"></div>
                                    </div>
                                    <div class="status-percent" id="percent-andamento">0%</div>
                                </div>
                                <div class="status-item">
                                    <div class="status-label">Finalizado</div>
                                    <div class="status-bar-container">
                                        <div class="status-bar status-finalizado" id="bar-finalizado"></div>
                                    </div>
                                    <div class="status-percent" id="percent-finalizado">0%</div>
                                </div>
                                <div class="status-item">
                                    <div class="status-label">Aberto</div>
                                    <div class="status-bar-container">
                                        <div class="status-bar status-aberto" id="bar-aberto"></div>
                                    </div>
                                    <div class="status-percent" id="percent-aberto">0%</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="performance-card">
                            <h3>üìà Volume Mensal</h3>
                            <div class="monthly-chart" id="monthly-chart">
                                <div class="loading-message">Carregando...</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Controles -->
                    <div class="dashboard-controls">
                        <button class="btn btn-primary" onclick="loadDashboardData()">
                            üîÑ Atualizar Dashboard
                        </button>
                        <button class="btn btn-secondary" onclick="alert('Funcionalidade em desenvolvimento')">
                            üìä Exportar Relat√≥rio
                        </button>
                    </div>
                </div>
            </div>

            <!-- Painel -->
            <div id="painel" class="page d-none">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Painel de Acompanhamento</h2>
                        <p class="card-subtitle">Visualize e gerencie todas as solicita√ß√µes</p>
                    </div>
                    
                    <div class="painel-controls">
                        <button class="btn btn-primary" onclick="loadSolicitacoes()">
                            üîÑ Atualizar Lista
                        </button>
                    </div>
                    
                    <div id="lista-solicitacoes" class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Cliente</th>
                                    <th>Projeto</th>
                                    <th>Solicitante</th>
                                    <th>Status</th>
                                    <th>Data Solicita√ß√£o</th>
                                    <th>Prazo</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="tabela-solicitacoes">
                                <tr>
                                    <td colspan="8" class="text-center">
                                        Carregue os dados clicando em "Atualizar Lista"
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p>Desenvolvido por: thiago@sagacy.com.br</p>
            </div>
        </footer>

        <!-- Toast Container -->
        <div id="toast-container" class="toast-container"></div>

        <!-- Debug Info -->
        <div id="debug-info" class="debug-info">
            <div>Debug Mode: ON</div>
            <div id="debug-last-action">-</div>
            <div id="debug-api-status">API: N√£o testada</div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="./js/main.js"></script>
    <script src="./js/api.js"></script>
    <script src="./js/dashboard.js"></script>
    <script src="./js/formulario.js"></script>
    <script src="./js/painel.js"></script>
    
    <style>
        .footer {
            background: var(--primary);
            color: white;
            text-align: center;
            padding: 1.5rem;
            margin-top: auto;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
        }
        
        .painel-controls {
            margin-bottom: 1rem;
        }
        
        .table-container {
            overflow-x: auto;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .table th,
        .table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .table th {
            background: #f8f9fa;
            font-weight: 600;
        }
        
        .text-center {
            text-align: center;
        }
        
        /* Email Notification */
        .email-notification {
            background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
            border: 1px solid #2196f3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1.5rem 0;
            box-shadow: 0 2px 4px rgba(33, 150, 243, 0.1);
        }
        
        .email-notification-content {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }
        
        .email-icon {
            font-size: 1.5rem;
            color: #2196f3;
            margin-top: 0.25rem;
        }
        
        .email-text {
            flex: 1;
        }
        
        .email-text strong {
            color: #1976d2;
            font-size: 1rem;
            display: block;
            margin-bottom: 0.5rem;
        }
        
        .email-text p {
            margin: 0;
            color: #424242;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        @media (max-width: 768px) {
            .email-notification {
                padding: 0.75rem;
            }
            
            .email-notification-content {
                gap: 0.75rem;
            }
            
            .email-icon {
                font-size: 1.25rem;
            }
        }
    </style>
    
    <script>
        function toggleOutroSolicitante() {
            const select = document.getElementById('solicitante');
            const campoOutro = document.getElementById('campo-outro-solicitante');
            const inputOutro = document.getElementById('outro-solicitante');
            
            if (select.value === 'Outros (especificar)') {
                campoOutro.style.display = 'block';
                inputOutro.required = true;
            } else {
                campoOutro.style.display = 'none';
                inputOutro.required = false;
                inputOutro.value = '';
            }
        }
        
        function limparFormulario() {
            const form = document.getElementById('form-solicitacao');
            if (form) {
                form.reset();
                const campoOutro = document.getElementById('campo-outro-solicitante');
                if (campoOutro) {
                    campoOutro.style.display = 'none';
                }
            }
        }
    </script>
</body>
</html>
